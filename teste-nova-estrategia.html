<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Nova EstratÃ©gia FrequÃªncia Mensal</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .test-result { margin: 15px 0; padding: 15px; border-radius: 5px; }
        .success { background: #d4edda; border-left: 4px solid #28a745; }
        .info { background: #d1ecf1; border-left: 4px solid #17a2b8; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; }
        .number-grid { display: grid; grid-template-columns: repeat(15, 1fr); gap: 5px; margin: 10px 0; }
        .number { background: #007bff; color: white; padding: 8px; text-align: center; border-radius: 50%; font-weight: bold; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¯ Teste da Nova EstratÃ©gia: FrequÃªncia Mensal</h1>
        
        <div class="test-result info">
            <h3>ğŸ“‹ CaracterÃ­sticas da Nova EstratÃ©gia</h3>
            <ul>
                <li><strong>Nome:</strong> FrequÃªncia Mensal</li>
                <li><strong>Ãcone:</strong> <i>ğŸ“…</i> Calendar</li>
                <li><strong>Cor:</strong> Teal/Cyan gradient</li>
                <li><strong>NÃºmero de jogos:</strong> 10 (ao invÃ©s de 7)</li>
                <li><strong>Funcionalidade:</strong> Analisa nÃºmeros do mÃªs anterior atÃ© o atual</li>
            </ul>
        </div>

        <div class="test-result success">
            <h3>âœ… Funcionalidades Implementadas</h3>
            <ul>
                <li>IntegraÃ§Ã£o com API da Caixa para buscar resultados recentes</li>
                <li>AnÃ¡lise de frequÃªncia dos nÃºmeros sorteados</li>
                <li>GeraÃ§Ã£o de 10 jogos Ãºnicos baseados na frequÃªncia</li>
                <li>Fallback com dados simulados quando API nÃ£o disponÃ­vel</li>
                <li>Sistema de randomizaÃ§Ã£o inteligente para evitar duplicatas</li>
            </ul>
        </div>

        <div class="test-result warning">
            <h3>âš ï¸ LimitaÃ§Ãµes Atuais</h3>
            <ul>
                <li>API da Caixa retorna apenas o Ãºltimo resultado</li>
                <li>HistÃ³rico mensal Ã© simulado para demonstraÃ§Ã£o</li>
                <li>Em produÃ§Ã£o, seria necessÃ¡rio API completa ou banco de dados</li>
            </ul>
        </div>

        <button onclick="testarEstrategia()">ğŸ§ª Testar EstratÃ©gia de FrequÃªncia</button>
        <button onclick="compararEstrategias()">ğŸ“Š Comparar com Outras EstratÃ©gias</button>
        
        <div id="resultado-teste"></div>
    </div>

    <script>
        async function testarEstrategia() {
            const resultado = document.getElementById('resultado-teste');
            resultado.innerHTML = '<p>ğŸ”„ Testando estratÃ©gia...</p>';
            
            try {
                // Simular a nova estratÃ©gia
                const jogosGerados = await simularEstrategiaFrequencia();
                
                let html = '<div class="test-result success">';
                html += '<h3>ğŸ² Jogos Gerados pela EstratÃ©gia FrequÃªncia Mensal</h3>';
                
                jogosGerados.forEach((jogo, index) => {
                    html += `<div><strong>Jogo ${index + 1}:</strong></div>`;
                    html += '<div class="number-grid">';
                    jogo.forEach(num => {
                        html += `<div class="number">${num.toString().padStart(2, '0')}</div>`;
                    });
                    html += '</div>';
                });
                
                html += '</div>';
                resultado.innerHTML = html;
                
            } catch (error) {
                resultado.innerHTML = `<div class="test-result warning"><h3>âš ï¸ Erro no Teste</h3><p>${error.message}</p></div>`;
            }
        }
        
        async function simularEstrategiaFrequencia() {
            // Simular a anÃ¡lise de frequÃªncia
            const frequenciaSimulada = {};
            
            // NÃºmeros que "mais saÃ­ram" no mÃªs (simulados)
            const numerosMaisFrequentes = [2, 4, 5, 11, 13, 14, 16, 18, 20, 23, 24];
            const numerosMenosFrequentes = [1, 3, 6, 7, 8, 9, 10, 12, 15, 17, 19, 21, 22, 25];
            
            // Simular frequÃªncias
            numerosMaisFrequentes.forEach(num => {
                frequenciaSimulada[num] = Math.floor(Math.random() * 5) + 8; // 8-12 vezes
            });
            
            numerosMenosFrequentes.forEach(num => {
                frequenciaSimulada[num] = Math.floor(Math.random() * 4) + 3; // 3-6 vezes
            });
            
            // Gerar 10 jogos Ãºnicos
            const jogos = [];
            const jogosUnicos = new Set();
            
            while (jogos.length < 10) {
                const jogo = gerarJogoComFrequencia(frequenciaSimulada);
                const jogoString = jogo.sort((a, b) => a - b).join(',');
                
                if (!jogosUnicos.has(jogoString)) {
                    jogosUnicos.add(jogoString);
                    jogos.push(jogo);
                }
            }
            
            return jogos;
        }
        
        function gerarJogoComFrequencia(frequencia) {
            const numerosOrdenados = Object.entries(frequencia)
                .map(([numero, freq]) => ({numero: parseInt(numero), frequencia: freq}))
                .sort((a, b) => b.frequencia - a.frequencia);
            
            const jogo = [];
            const maisFrequentes = numerosOrdenados.slice(0, 12);
            const menosFrequentes = numerosOrdenados.slice(12);
            
            // Embaralhar
            maisFrequentes.sort(() => 0.5 - Math.random());
            menosFrequentes.sort(() => 0.5 - Math.random());
            
            // 60% mais frequentes, 40% menos frequentes
            for (let i = 0; i < 9 && i < maisFrequentes.length; i++) {
                jogo.push(maisFrequentes[i].numero);
            }
            
            for (let i = 0; i < 6 && i < menosFrequentes.length; i++) {
                jogo.push(menosFrequentes[i].numero);
            }
            
            return jogo.sort((a, b) => a - b);
        }
        
        function compararEstrategias() {
            const resultado = document.getElementById('resultado-teste');
            resultado.innerHTML = `
                <div class="test-result info">
                    <h3>ğŸ“ˆ ComparaÃ§Ã£o de EstratÃ©gias</h3>
                    <table border="1" style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                        <tr style="background: #f8f9fa;">
                            <th style="padding: 10px;">EstratÃ©gia</th>
                            <th style="padding: 10px;">Jogos</th>
                            <th style="padding: 10px;">Base de Dados</th>
                            <th style="padding: 10px;">CaracterÃ­sticas</th>
                        </tr>
                        <tr>
                            <td style="padding: 8px;">Poder das Repetidas</td>
                            <td style="padding: 8px;">7</td>
                            <td style="padding: 8px;">Ãšltimo resultado</td>
                            <td style="padding: 8px;">Usa nÃºmeros do Ãºltimo sorteio</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px;">EquilÃ­brio Par/Ãmpar</td>
                            <td style="padding: 8px;">7</td>
                            <td style="padding: 8px;">MatemÃ¡tica</td>
                            <td style="padding: 8px;">Balanceia pares e Ã­mpares</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px;">FrequÃªncia HistÃ³rica</td>
                            <td style="padding: 8px;">7</td>
                            <td style="padding: 8px;">Dados simulados</td>
                            <td style="padding: 8px;">NÃºmeros quentes vs frios</td>
                        </tr>
                        <tr style="background: #e8f5e8;">
                            <td style="padding: 8px;"><strong>FrequÃªncia Mensal</strong></td>
                            <td style="padding: 8px;"><strong>10</strong></td>
                            <td style="padding: 8px;"><strong>API da Caixa</strong></td>
                            <td style="padding: 8px;"><strong>AnÃ¡lise mensal real + 10 jogos</strong></td>
                        </tr>
                    </table>
                    <p style="margin-top: 15px;"><strong>ğŸŒŸ Vantagem da nova estratÃ©gia:</strong> Usa dados reais recentes e gera mais jogos!</p>
                </div>
            `;
        }
        
        // Teste automÃ¡tico na inicializaÃ§Ã£o
        window.onload = function() {
            console.log('âœ… Nova estratÃ©gia FrequÃªncia Mensal carregada com sucesso!');
        }
    </script>
</body>
</html>